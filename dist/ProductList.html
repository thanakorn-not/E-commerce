<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Supermart</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/webp" href="/img/logo.webp" />
    <script src="cart.js" defer></script>
  </head>
  <body class="bg-gray-50">
    <!-- Navbar -->
    <nav
      class="bg-white shadow-md py-4 px-6 flex justify-between items-center sticky top-0 z-10"
    >
      <div class="flex items-center gap-4">
        <img
          src="/img/logo.webp"
          alt="Supermart Logo"
          class="h-10 w-10 object-contain"
        />
        <div class="text-2xl font-bold text-gray-900">Supermart</div>
      </div>
      <div class="flex items-center gap-6">
        <a href="Home.html" class="text-gray-700 hover:text-orange-500">Home</a>
        <a href="ProductList.html" class="text-gray-700 hover:text-orange-500"
          >Product</a
        >
        <a href="about.html" class="text-gray-700 hover:text-orange-500"
          >About Us</a
        >
        <a href="contact.html" class="text-gray-700 hover:text-orange-500"
          >Contact</a
        >
        <button
          class="text-gray-700 hover:text-orange-500 relative"
          onclick="toggleCart()"
        >
          üõí
          <span
            id="cart-count"
            class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full"
            >0</span
          >
        </button>
        <a href="User.html" class="text-gray-700 hover:text-orange-500">üë§</a>
      </div>
    </nav>

    <!-- Cart Sidebar -->
    <section
      id="cart-sidebar"
      class="fixed top-0 right-0 w-96 h-full bg-white shadow-lg p-6 transform translate-x-full transition-transform duration-300 ease-in-out"
    >
      <div class="flex justify-between items-center border-b pb-4 mb-4">
        <h2 class="text-2xl font-bold">Shopping Cart</h2>
        <button class="text-red-500 text-xl" onclick="toggleCart()">‚úñ</button>
      </div>
      <div class="space-y-4 overflow-y-auto max-h-[70vh] text-black"></div>
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let cartCount = 0;
        const cartCountElement = document.getElementById("cart-count");
        const addToCartButtons = document.querySelectorAll(".add-to-cart");

        addToCartButtons.forEach((button) => {
          button.addEventListener("click", function () {
            cartCount++;
            cartCountElement.textContent = cartCount;
          });
        });
      });
    </script>

    <section class="container mx-auto my-12 px-6 text-black">
      <h2 class="text-3xl font-bold text-gray-900 mb-6">Product</h2>

      <!-- Search and Filter -->
      <div class="flex flex-wrap items-center justify-between mb-6">
        <input
          type="text"
          id="search"
          placeholder="Search products..."
          class="p-2 border rounded-lg w-full md:w-1/3"
        />
        <select
          id="categoryFilter"
          class="p-2 border rounded-lg w-full md:w-1/4 mt-2 md:mt-0"
        >
          <option value="all">All Categories</option>
          <option value="vegetables">Vegetables</option>
          <option value="fruits">Fruits</option>
          <option value="snacks">Snacks</option>
          <option value="coffee-tea">Coffee & Tea</option>
          <option value="milk-water">Milk & Water</option>
        </select>
      </div>

      <script>
        // ‡∏£‡∏≠‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ DOM ‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        document.addEventListener("DOMContentLoaded", () => {
          const urlParams = new URLSearchParams(window.location.search);
          let category =
            urlParams.get("category") ||
            localStorage.getItem("selectedCategory");

          const categoryFilter = document.getElementById("categoryFilter");
          const productList = document.getElementById("productList");

          if (!productList) {
            console.error(
              "Error: #productList element not found in the document."
            );
            return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ productList
          }

          if (category) {
            categoryFilter.value = category;
            filterProducts(category);
          }

          categoryFilter.addEventListener("change", (event) => {
            const selectedCategory = event.target.value;
            localStorage.setItem("selectedCategory", selectedCategory);
            filterProducts(selectedCategory);
          });

          function filterProducts(category) {
            console.log("Filtering category:", category); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏°‡∏≤
            const products = document.getElementsByClassName("product");

            if (products.length === 0) {
              console.error("No products found in DOM!");
              return;
            }

            for (const product of products) {
              console.log(`Checking product: ${product.dataset.category}`); // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
              product.style.display =
                category === "all" || product.dataset.category === category
                  ? "block"
                  : "none";
            }
          }
        });
      </script>

      <!-- Product Grid -->
      <div id="productGrid">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6" id="productList">
          <!-- ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 1 -->
          <div
            class="bg-white shadow-lg rounded-lg p-4 text-center product"
            data-category="snacks"
          >
            <img
              src="/img/lay1.jpg"
              class="mx-auto mb-2 h-48 w-full object-contain"
              alt="Product"
            />
            <p class="font-medium text-black">‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°</p>
            <p class="text-gray-600">20 ‡∏ö‡∏≤‡∏ó</p>
            <button
              class="mt-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600"
              onclick="showProductDetail('lay1')"
            >
              üõí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </button>
          </div>
          <div
            class="bg-white shadow-lg rounded-lg p-4 text-center product"
            data-category="snacks"
          >
            <img
              src="/img/snack1.webp"
              class="mx-auto mb-2 h-48 w-full object-contain"
              alt="Product"
            />
            <p class="font-medium text-black">
              ‡∏™‡πÅ‡∏ô‡πá‡∏Ñ‡πÅ‡∏à‡πá‡∏Ñ‡∏£‡∏™‡∏´‡∏≠‡∏¢‡πÄ‡∏ä‡∏•‡∏•‡πå‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏™‡πÑ‡∏õ‡∏ã‡∏µ‡πà
            </p>
            <p class="text-gray-600">20 ‡∏ö‡∏≤‡∏ó</p>
            <button
              class="mt-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600"
              onclick="showProductDetail('snack1')"
            >
              üõí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </button>
          </div>
          <div
            class="bg-white shadow-lg rounded-lg p-4 text-center product"
            data-category="coffee-tea"
          >
            <img
              src="/img/coffee.jpeg"
              class="mx-auto mb-2 h-48 w-full object-contain"
              alt="Product"
            />
            <p class="font-medium text-black">‡∏Å‡∏≤‡πÅ‡∏ü‡∏î‡∏≥‡∏≠‡∏≤‡∏£‡∏≤‡∏ö‡∏¥‡∏Å‡πâ‡∏≤</p>
            <p class="text-gray-600">50 ‡∏ö‡∏≤‡∏ó</p>
            <button
              class="mt-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600"
              onclick="showProductDetail('coffee1')"
            >
              üõí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </button>
          </div>
          <div
            class="bg-white shadow-lg rounded-lg p-4 text-center product"
            data-category="fruits"
          >
            <img
              src="/img/starwberry.jpg"
              class="mx-auto mb-2 h-48 w-full object-contain"
              alt="Product"
            />
            <p class="font-medium text-black">‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏™‡∏î</p>
            <p class="text-gray-600">80 ‡∏ö‡∏≤‡∏ó</p>
            <button
              class="mt-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600"
              onclick="showProductDetail('fruit1')"
            >
              üõí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡πÇ‡∏î‡∏¢ default) -->
    <div
      id="productDetail"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"
    >
      <div class="bg-white rounded-lg p-6 max-w-lg w-full">
        <h2 id="detailTitle" class="text-xl font-bold mb-4 text-black"></h2>
        <img
          id="detailImage"
          src=""
          class="mx-auto mb-4 h-48 w-full object-contain"
          alt="Product Detail"
        />
        <p id="detailPrice" class="text-black mb-4"></p>
        <p id="detailDescription" class="text-gray-800 mb-4"></p>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
        <div class="flex items-center justify-center mb-4">
          <input
            id="quantity"
            type="number"
            value="1"
            min="1"
            class="w-16 text-center text-black border-2 border-black-500"
          />
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ -->
        <button
          class="w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 add-to-cart"
          data-name="‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°"
          data-price="20"
          data-image="/img/lay1.jpg"
        >
          ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        </button>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î -->
        <button
          onclick="hideProductDetail()"
          class="mt-4 w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600"
        >
          ‡∏õ‡∏¥‡∏î
        </button>
      </div>
    </div>

    <!-- Cart Sidebar -->
    <section
      id="cart-sidebar"
      class="fixed top-0 right-0 w-96 h-full bg-white shadow-lg p-6 transform translate-x-full transition-transform duration-300 ease-in-out"
    >
      <div class="flex justify-between items-center border-b pb-4 mb-4">
        <h2 class="text-2xl font-bold">Shopping Cart</h2>
        <button class="text-red-500 text-xl" onclick="toggleCart()">‚úñ</button>
      </div>
      <div class="space-y-4 overflow-y-auto max-h-[70vh] text-black"></div>
    </section>

    <script>
      let currentProduct = null; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
      let quantity = 1; // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
      function showProductDetail(productId) {
        const products = {
          lay1: {
            id: "lay1",
            title: "‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°",
            image: "/img/lay1.jpg",
            price: 20, // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
            description:
              "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°...",
          },
          snack1: {
            id: "snack1",
            title: "‡∏™‡πÅ‡∏ô‡πá‡∏Ñ‡πÅ‡∏à‡πá‡∏Ñ‡∏£‡∏™‡∏´‡∏≠‡∏¢‡πÄ‡∏ä‡∏•‡∏•‡πå‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏™‡πÑ‡∏õ‡∏ã‡∏µ‡πà",
            image: "/img/snack1.webp",
            price: 20, // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
            description:
              "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°...",
          },
          coffee1: {
            id: "coffee1",
            title: "‡∏Å‡∏≤‡πÅ‡∏ü‡∏î‡∏≥‡∏≠‡∏≤‡∏£‡∏≤‡∏ö‡∏¥‡∏Å‡πâ‡∏≤",
            image: "/img/coffee.jpeg",
            price: 50, // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
            description:
              "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°...",
          },
          fruit1: {
            id: "fruit1",
            title: "‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà‡∏™‡∏î",
            image: "/img/starwberry.jpg",
            price: 80, // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
            description:
              "‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏•‡∏¢‡πå‡∏£‡∏™‡∏ã‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡∏´‡∏≠‡∏°...",
          },
        };

        const product = products[productId];
        if (product) {
          document.getElementById("detailTitle").innerText = product.title;
          document.getElementById("detailImage").src = product.image;
          document.getElementById("detailPrice").innerText =
            product.price + " ‡∏ö‡∏≤‡∏ó";
          document.getElementById("detailDescription").innerText =
            product.description;
          document.getElementById("productDetail").classList.remove("hidden");
          document.getElementById("quantity").value = 1;

          currentProduct = product; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
          quantity = 1;
        }
      }

      // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
      function hideProductDetail() {
        document.getElementById("productDetail").classList.add("hidden");
      }
    </script>

    <script>
      document.getElementById("search").addEventListener("input", function () {
        let searchValue = this.value.trim().toLowerCase(); // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
        document
          .querySelectorAll("#productList .product")
          .forEach((product) => {
            let productName = product
              .querySelector("p")
              .innerText.toLowerCase(); // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            product.style.display = productName.includes(searchValue)
              ? ""
              : "none";
          });
      });

      function filterProducts(category) {
        document
          .querySelectorAll("#productList .product")
          .forEach((product) => {
            let productCategory = product.getAttribute("data-category"); // ‡∏î‡∏∂‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            product.style.display =
              category === "all" || productCategory === category ? "" : "none";
          });
      }
    </script>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center py-4 mt-8">
      <p>&copy; 2023 Your Store. All rights reserved.</p>
    </footer>
  </body>
</html>
